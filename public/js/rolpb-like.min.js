let rolpbTimerId;function rolpb_debounce(t,e){return function(...s){rolpbTimerId&&clearTimeout(rolpbTimerId),rolpbTimerId=setTimeout((()=>{t.apply(this,s)}),e)}}function rolbp_animateIcon(t){const e=t.querySelector("svg");e&&(e.style.transform="scale(1.1)",setTimeout((()=>e.style.transform="scale(1.0)"),100))}function rolpb_replaceIcon(t){t&&!t.classList.contains("wp-like-post__button--liked")&&(t.classList.add("wp-like-post__button--liked"),t.innerHTML=ROLPB.icons.active)}function rolpb_getXHR(t){const e=new XMLHttpRequest;return e.open("POST",t,!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),e}function rolpb_getBulkLikes(t,e){const s=rolpb_getXHR(e.url);s.onload=()=>{if(s.status>=200&&s.status<400){const o=JSON.parse(s.responseText);if(o.success){const s=o.data;t.forEach((t=>{const o=document.querySelector(`.wp-like-post__button[data-post-id="${t}"]`);if(!o)return;const i=o.parentElement.querySelector(".wp-like-post__count");if(!i)return;const n=parseInt(s[t]);n!==parseInt(o.getAttribute("data-total-likes"))&&(n>0&&(o.classList.add("wp-like-post__button--liked"),o.innerHTML=e.icons.active),i.innerHTML=n.toString())}))}}};const o=e.nonces.getLikes,i=JSON.stringify(e.block);s.send(`action=rolpb_get_post_likes&post_ids=${t}&nonce=${o}&attributes=${i}`)}let lpbPost=function(){function t(t,e){Object.freeze(e);const s=parseInt(t.getAttribute("data-post-id")),o={total:parseInt(t.getAttribute("data-total-likes")),fromUser:parseInt(t.getAttribute("data-likes-from-user"))};Object.defineProperties(this,{likeButton:{value:t},postId:{value:s},likes:{value:{total:o.total,fromUser:o.fromUser,toAdd:0},writable:!0},_settings:{value:e}})}return t.prototype.like=function(){if(this.likes.fromUser>=parseInt(this._settings.limit))return;this.likes.toAdd++,this.likes.fromUser++;const t=this.likes.total;this.likeButton.parentElement.querySelector(".wp-like-post__count").innerHTML=(t+this.likes.toAdd).toString();rolpb_debounce((()=>{const t=rolpb_getXHR(this._settings.url);t.onload=()=>{t.status>=200&&t.status<400&&(this.likes.total=this.likes.total+this.likes.toAdd,this.likes.toAdd=0,this.likeButton.dataset.totalLikes=this.likes.total.toString())};const e=this.postId,s=this._settings.nonces.likePost;t.send(`action=rolpb_like_post&post_id=${e}&count=${this.likes.toAdd}&nonce=${s}`)}),500)(),rolpb_replaceIcon(this.likeButton),rolbp_animateIcon(this.likeButton)},t.prototype.getLikes=function(){rolpb_getBulkLikes([this.postId],this._settings)},t}();document.addEventListener("DOMContentLoaded",(()=>{const t=document.querySelectorAll(".wp-like-post__button");if(0===t.length||!window.ROLPB)return;let e=[];t.forEach((t=>{let s=new lpbPost(t,window.ROLPB);s._settings.attributes.renderWithAjax&&e.push(s.postId),t.addEventListener("click",(()=>s.like()))})),0!==e.length&&rolpb_getBulkLikes(e,window.ROLPB)}));